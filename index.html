<!DOCTYPE html>
<html>
    <head>
        <title>pophealth</title>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="css/default.css">
        <link rel="stylesheet" type="text/css" href="css/animate.css">
        <script src="https://api.tiles.mapbox.com/mapbox.js/v1.6.4/mapbox.js"></script>
        <link href="https://api.tiles.mapbox.com/mapbox.js/v1.6.4/mapbox.css" rel="stylesheet" />
        <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
        <link href="http://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <select id="question">
            <option>What hospitals do your neighbors go to?</option>
            <option>What are the safest hospitals?</option>
            <option>What are the most accident prone?</option>
            <option>Where do most seniors get treated?</option>
            <option>What hospitals are getting the best quality outcomes?</option>
            <option>Where is the least healthcare access?</option>
            <option>Where is the least expensive healthcare?</option>
            <option>Where are the most complex care plans?</option>
        </select>
        <div id="map"></div>
        <script src="js/map-module.js"></script>
        <script src="js/marker-module.js"></script>
        <script src="js/menu-module.js"></script>
        <script src="js/urban-area-module.js"></script>
        <script>
            var _urbanAreaData = {},
                _hospitalData = {};
            
            var getUrbanArea = function(id) {
                    return _urbanAreaData.features[id];  
            };
            
            var getHospital = function(id) {
                    return _hospitalData.hospitals[id];  
            };
            
            //We load the data
            d3.json("data/urban_areas.json", function(error, urbanAreaData) { //TODO in case of error
                _urbanAreaData = urbanAreaData;
                
                //We load the hospitals' data
                d3.json("data/hospitals.json", function(error, hospitalData) {
                    _hospitalData = hospitalData;
                    
                    mapModule.init()
                    urbanAreaModule.init();
                    menuModule.init();
                    markerModule.init();
                });
            });
            
            d3.select(window).on("resize", function() {
                mapModule.update();
                menuModule.update();
            });
        </script>
    </body>
</html>